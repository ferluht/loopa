\hypertarget{_smooth_cross_fade_8hpp_source}{}\doxysection{Smooth\+Cross\+Fade.\+hpp}
\label{_smooth_cross_fade_8hpp_source}\index{common/SmoothCrossFade.hpp@{common/SmoothCrossFade.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include "{}ExpFilter.hpp"{}}}
\DoxyCodeLine{3 }
\DoxyCodeLine{7 \textcolor{keyword}{class }SmoothCrossFade \{}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{keyword}{public}:}
\DoxyCodeLine{10 }
\DoxyCodeLine{11     \textcolor{keywordtype}{float} a = 0;}
\DoxyCodeLine{12     \textcolor{keywordtype}{float} b = 0;}
\DoxyCodeLine{13     \textcolor{keywordtype}{float} c = 0;}
\DoxyCodeLine{14     \textcolor{keywordtype}{bool} changed = \textcolor{keyword}{false};}
\DoxyCodeLine{15     \textcolor{keywordtype}{int} sampleCounter = 0;}
\DoxyCodeLine{16     \textcolor{keywordtype}{int} nochangeCounter = 0;}
\DoxyCodeLine{17     \textcolor{keywordtype}{bool} nochangeFlag = \textcolor{keyword}{false};}
\DoxyCodeLine{18     ExpFilter* filter = \textcolor{keyword}{new} ExpFilter();}
\DoxyCodeLine{19 }
\DoxyCodeLine{20     SmoothCrossFade() \{}
\DoxyCodeLine{21         filter-\/>freq = 50;}
\DoxyCodeLine{22     \}}
\DoxyCodeLine{23 }
\DoxyCodeLine{24     \textcolor{keywordtype}{void} set(\textcolor{keywordtype}{float} v) \{}
\DoxyCodeLine{25         a = b; }
\DoxyCodeLine{26         sampleCounter = 0; }
\DoxyCodeLine{27         b = v; }
\DoxyCodeLine{28         changed = \textcolor{keyword}{true};}
\DoxyCodeLine{29     \}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31     \textcolor{keywordtype}{float} get() \{}
\DoxyCodeLine{32         \textcolor{keywordflow}{return} b;}
\DoxyCodeLine{33         \textcolor{keywordflow}{if} (changed) \{}
\DoxyCodeLine{34           nochangeCounter = 0;}
\DoxyCodeLine{35           nochangeFlag = \textcolor{keyword}{false};}
\DoxyCodeLine{36           c = ((float) sampleCounter) / (44100);}
\DoxyCodeLine{37           sampleCounter++;}
\DoxyCodeLine{38           \textcolor{keywordflow}{if} (c <= 1) \{}
\DoxyCodeLine{39             filter-\/>in = (b * c + a * (1 -\/ c));}
\DoxyCodeLine{40           \}}
\DoxyCodeLine{41           \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{42             a = b;}
\DoxyCodeLine{43             filter-\/>in = b;}
\DoxyCodeLine{44             changed = \textcolor{keyword}{false};}
\DoxyCodeLine{45           \}}
\DoxyCodeLine{46           filter-\/>process();}
\DoxyCodeLine{47           \textcolor{keywordflow}{return} filter-\/>out;}
\DoxyCodeLine{48           }
\DoxyCodeLine{49         \}}
\DoxyCodeLine{50         \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{51           sampleCounter = 0;}
\DoxyCodeLine{52           \textcolor{keywordflow}{if} (!nochangeFlag) nochangeCounter++;}
\DoxyCodeLine{53           \textcolor{keywordflow}{if} (nochangeCounter > 44100) \{}
\DoxyCodeLine{54             nochangeCounter = 0;}
\DoxyCodeLine{55             nochangeFlag = \textcolor{keyword}{true};}
\DoxyCodeLine{56           \}}
\DoxyCodeLine{57           a = b;}
\DoxyCodeLine{58           \textcolor{keywordflow}{if} (!nochangeFlag) \{}
\DoxyCodeLine{59             filter-\/>in = b;}
\DoxyCodeLine{60             filter-\/>process();}
\DoxyCodeLine{61             \textcolor{keywordflow}{return} filter-\/>out;}
\DoxyCodeLine{62           \}}
\DoxyCodeLine{63           \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{64             \textcolor{keywordflow}{return} b;}
\DoxyCodeLine{65           \}}
\DoxyCodeLine{66         \}}
\DoxyCodeLine{67     \}}
\DoxyCodeLine{68 \};}

\end{DoxyCode}
