\hypertarget{_saturn_8hpp_source}{}\doxysection{Saturn.\+hpp}
\label{_saturn_8hpp_source}\index{common/Saturn.hpp@{common/Saturn.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{6 \textcolor{keyword}{class }Saturn \{}
\DoxyCodeLine{7 \textcolor{keyword}{public}:}
\DoxyCodeLine{8 }
\DoxyCodeLine{9   \textcolor{keywordtype}{float} fold = 1;}
\DoxyCodeLine{10   \textcolor{keywordtype}{float} sat = 1;}
\DoxyCodeLine{11   \textcolor{keywordtype}{float} in = 0;}
\DoxyCodeLine{12   \textcolor{keywordtype}{float} out = 0;}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 }
\DoxyCodeLine{15   Saturn() \{}
\DoxyCodeLine{16     }
\DoxyCodeLine{17   \} }
\DoxyCodeLine{18 }
\DoxyCodeLine{19   \textcolor{keywordtype}{float} sigmoid(\textcolor{keywordtype}{float} x) \{}
\DoxyCodeLine{20       \textcolor{keywordflow}{if} (abs(x) < 1)}
\DoxyCodeLine{21         \textcolor{keywordflow}{return} x * (1.5 -\/ 0.5 * x * x);}
\DoxyCodeLine{22       \textcolor{keywordflow}{else} }
\DoxyCodeLine{23         \textcolor{keywordflow}{return} 1 * sign(x);}
\DoxyCodeLine{24   \}}
\DoxyCodeLine{25 }
\DoxyCodeLine{26   \textcolor{keywordtype}{float} saturate(\textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} t) \{}
\DoxyCodeLine{27     \textcolor{keywordflow}{if} (abs(x)<t)}
\DoxyCodeLine{28           \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{29       \textcolor{keywordflow}{else}}
\DoxyCodeLine{30       \{}
\DoxyCodeLine{31           \textcolor{keywordflow}{if} (x > 0)}
\DoxyCodeLine{32               \textcolor{keywordflow}{return} t + (1-\/t)*sigmoid((x-\/t)/((1-\/t)*1.5));}
\DoxyCodeLine{33           \textcolor{keywordflow}{else}}
\DoxyCodeLine{34               \textcolor{keywordflow}{return} -\/(t + (1-\/t)*sigmoid((-\/x-\/t)/((1-\/t)*1.5)));}
\DoxyCodeLine{35       \}}
\DoxyCodeLine{36   \}}
\DoxyCodeLine{37 }
\DoxyCodeLine{38   \textcolor{keywordtype}{float} sign(\textcolor{keywordtype}{float} x) \{}
\DoxyCodeLine{39     \textcolor{keywordflow}{if} (x < 0) \{}
\DoxyCodeLine{40       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{41     \}}
\DoxyCodeLine{42     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x > 0) \{}
\DoxyCodeLine{43       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{44     \}}
\DoxyCodeLine{45     \textcolor{keywordflow}{else} \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{46   \}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48   \textcolor{keywordtype}{void} process() \{}
\DoxyCodeLine{49     out = in * (fold + 1);}
\DoxyCodeLine{50 }
\DoxyCodeLine{51     \textcolor{keywordflow}{while} (out > 1) \{}
\DoxyCodeLine{52       out = (out -\/ 1) * -\/1;}
\DoxyCodeLine{53       out += 1;}
\DoxyCodeLine{54       \textcolor{keywordflow}{while} (out < 0) out *= -\/1;}
\DoxyCodeLine{55     \}}
\DoxyCodeLine{56     \textcolor{keywordflow}{while} (out < -\/1) \{}
\DoxyCodeLine{57       out = (out + 1) * -\/1;}
\DoxyCodeLine{58       out -\/= 1;}
\DoxyCodeLine{59       \textcolor{keywordflow}{while} (out > 0) out *= -\/1;}
\DoxyCodeLine{60     \}}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     out = out * sat;}
\DoxyCodeLine{63     \textcolor{keywordflow}{if} (sat > 1)}
\DoxyCodeLine{64     out = saturate(out, 0);}
\DoxyCodeLine{65   \}}
\DoxyCodeLine{66 \};}
\DoxyCodeLine{67 }

\end{DoxyCode}
