\hypertarget{_dattorro_8hpp_source}{}\doxysection{Dattorro.\+hpp}
\label{_dattorro_8hpp_source}\index{effects\_audio/Plateau/Dattorro.hpp@{effects\_audio/Plateau/Dattorro.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//}}
\DoxyCodeLine{2 \textcolor{comment}{// This plate reverb is based upon Jon Dattorro's 1997 reverb algorithm.}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#ifndef DATTORRO\_HPP}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#define DATTORRO\_HPP}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_allpass_filter_8hpp}{AllpassFilter.hpp}}"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}OnePoleFilters.hpp"{}}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}LFO.hpp"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <A.h>}}
\DoxyCodeLine{12 \textcolor{comment}{//\#include <iostream>}}
\DoxyCodeLine{13 }
\DoxyCodeLine{15 \textcolor{keyword}{class }Dattorro \{}
\DoxyCodeLine{16 \textcolor{keyword}{public}:}
\DoxyCodeLine{17     Dattorro() : Dattorro(false) \{\};}
\DoxyCodeLine{18     Dattorro(\textcolor{keywordtype}{bool} mono\_);}
\DoxyCodeLine{19     \textcolor{keywordtype}{void} process();}
\DoxyCodeLine{20     \textcolor{keywordtype}{void} clear();}
\DoxyCodeLine{21     \textcolor{keywordtype}{void} setTimeScale(\textcolor{keywordtype}{float} timeScale);}
\DoxyCodeLine{22     \textcolor{keywordtype}{void} setPreDelay(\textcolor{keywordtype}{float} time);}
\DoxyCodeLine{23     \textcolor{keywordtype}{void} unFreeze();}
\DoxyCodeLine{24 }
\DoxyCodeLine{25     \textcolor{keywordtype}{float} leftInput = 0;}
\DoxyCodeLine{26     \textcolor{keywordtype}{float} rightInput = 0;}
\DoxyCodeLine{27     \textcolor{keywordtype}{float} rightOut = 0.0;}
\DoxyCodeLine{28     \textcolor{keywordtype}{float} leftOut = 0.0;}
\DoxyCodeLine{29     \textcolor{keywordtype}{float} inputLowCut = 0.0;}
\DoxyCodeLine{30     \textcolor{keywordtype}{float} inputHighCut = 10000.0;}
\DoxyCodeLine{31     \textcolor{keywordtype}{float} reverbHighCut = 10000.0;}
\DoxyCodeLine{32     \textcolor{keywordtype}{float} reverbLowCut = 0.0;}
\DoxyCodeLine{33     \textcolor{keywordtype}{float} inputDiffusion1 = 0.75;}
\DoxyCodeLine{34     \textcolor{keywordtype}{float} inputDiffusion2 = 0.625;}
\DoxyCodeLine{35     \textcolor{keywordtype}{float} plateDiffusion1 = 0.7;}
\DoxyCodeLine{36     \textcolor{keywordtype}{float} plateDiffusion2 = 0.5;}
\DoxyCodeLine{37     \textcolor{keywordtype}{float} decay = 0.9999;}
\DoxyCodeLine{38     \textcolor{keywordtype}{float} diffuseInput = 0.0;}
\DoxyCodeLine{39     \textcolor{keywordtype}{float} size = 1;}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{keyword}{private}:}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     \textcolor{keywordtype}{bool} mono = \textcolor{keyword}{true};}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \textcolor{keywordtype}{float} \_timeScale = 1.0;}
\DoxyCodeLine{46     \textcolor{keywordtype}{float} \_preDelayTime = 0.0;}
\DoxyCodeLine{47     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kInApf1Time = 141;}
\DoxyCodeLine{48     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kInApf2Time = 107;}
\DoxyCodeLine{49     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kInApf3Time = 379;}
\DoxyCodeLine{50     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kInApf4Time = 277;}
\DoxyCodeLine{51 }
\DoxyCodeLine{52     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kLeftApf1Time = 672;}
\DoxyCodeLine{53     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kLeftDelay1Time = 4453;}
\DoxyCodeLine{54     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kLeftApf2Time = 1800;}
\DoxyCodeLine{55     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kLeftDelay2Time = 3720;}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kRightApf1Time = 908;}
\DoxyCodeLine{58     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kRightDelay1Time = 4217;}
\DoxyCodeLine{59     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kRightApf2Time = 2656;}
\DoxyCodeLine{60     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kRightDelay2Time = 3163;}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kLeftTaps[7] = \{266, 2974, 1913, 1996, 1990, 187, 1066\};}
\DoxyCodeLine{63     \textcolor{keyword}{const} \textcolor{keywordtype}{long} \_kRightTaps[7] = \{266, 2974, 1913, 1996, 1990, 187, 1066\};}
\DoxyCodeLine{64     \textcolor{keywordtype}{long} \_scaledLeftTaps[7] = \{0,0,0,0,0,0,0\};}
\DoxyCodeLine{65     \textcolor{keywordtype}{long} \_scaledRightTaps[7] = \{0,0,0,0,0,0,0\};}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keywordtype}{float} \_leftApf1Time = 0.0;}
\DoxyCodeLine{68     \textcolor{keywordtype}{float} \_leftApf2Time = 0.0;}
\DoxyCodeLine{69     \textcolor{keywordtype}{float} \_rightApf1Time = 0.0;}
\DoxyCodeLine{70     \textcolor{keywordtype}{float} \_rightApf2Time = 0.0;}
\DoxyCodeLine{71 }
\DoxyCodeLine{72     \textcolor{keyword}{const} \textcolor{keywordtype}{float} \_kLfoExcursion = 16.0;}
\DoxyCodeLine{73 }
\DoxyCodeLine{74     \textcolor{keyword}{const} \textcolor{keywordtype}{float} \_dattorroSampleRate = 29761.0;}
\DoxyCodeLine{75     \textcolor{keywordtype}{float} \_sampleRate = SAMPLERATE;}
\DoxyCodeLine{76     \textcolor{keywordtype}{float} \_dattorroScaleFactor = \_sampleRate / \_dattorroSampleRate;}
\DoxyCodeLine{77     \textcolor{keywordtype}{float} \_decay = 0.00;}
\DoxyCodeLine{78     \textcolor{keywordtype}{float} \_leftSum = 0.0;}
\DoxyCodeLine{79     \textcolor{keywordtype}{float} \_rightSum = 0.0;}
\DoxyCodeLine{80     \textcolor{keywordtype}{bool} \_freeze = \textcolor{keyword}{false};}
\DoxyCodeLine{81     OnePoleHPFilter \_leftInputDCBlock;}
\DoxyCodeLine{82     OnePoleHPFilter \_rightInputDCBlock;}
\DoxyCodeLine{83     OnePoleLPFilter \_inputLpf;}
\DoxyCodeLine{84     OnePoleHPFilter \_inputHpf;}
\DoxyCodeLine{85 }
\DoxyCodeLine{86     InterpDelay2<float> \_preDelay;}
\DoxyCodeLine{87 }
\DoxyCodeLine{88     AllpassFilter<float> \_inApf1;}
\DoxyCodeLine{89     AllpassFilter<float> \_inApf2;}
\DoxyCodeLine{90     AllpassFilter<float> \_inApf3;}
\DoxyCodeLine{91     AllpassFilter<float> \_inApf4;}
\DoxyCodeLine{92     \textcolor{keywordtype}{float} \_tankFeed = 0.0;}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     AllpassFilter<float> \_leftApf1;}
\DoxyCodeLine{95     InterpDelay2<float> \_leftDelay1;}
\DoxyCodeLine{96     OnePoleLPFilter \_leftFilter;}
\DoxyCodeLine{97     OnePoleHPFilter \_leftHpf;}
\DoxyCodeLine{98     AllpassFilter<float> \_leftApf2;}
\DoxyCodeLine{99     InterpDelay2<float> \_leftDelay2;}
\DoxyCodeLine{100 }
\DoxyCodeLine{101     AllpassFilter<float> \_rightApf1;}
\DoxyCodeLine{102     InterpDelay2<float> \_rightDelay1;}
\DoxyCodeLine{103     OnePoleLPFilter \_rightFilter;}
\DoxyCodeLine{104     OnePoleHPFilter \_rightHpf;}
\DoxyCodeLine{105     AllpassFilter<float> \_rightApf2;}
\DoxyCodeLine{106     InterpDelay2<float> \_rightDelay2;}
\DoxyCodeLine{107 }
\DoxyCodeLine{108     OnePoleHPFilter \_leftOutDCBlock;}
\DoxyCodeLine{109     OnePoleHPFilter \_rightOutDCBlock;}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     \textcolor{comment}{// Freeze Cross fade}}
\DoxyCodeLine{112     \textcolor{keywordtype}{float} \_fade = 1.0;}
\DoxyCodeLine{113     \textcolor{keywordtype}{float} \_fadeTime = 0.002;}
\DoxyCodeLine{114     \textcolor{keywordtype}{float} \_fadeStep = 1.0 / (\_fadeTime * \_sampleRate);}
\DoxyCodeLine{115     \textcolor{keywordtype}{float} \_fadeDir = 1.0;}
\DoxyCodeLine{116 }
\DoxyCodeLine{117     \textcolor{keywordtype}{float} dattorroScale(\textcolor{keywordtype}{float} delayTime);}
\DoxyCodeLine{118 \};}
\DoxyCodeLine{119 }
\DoxyCodeLine{120 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
