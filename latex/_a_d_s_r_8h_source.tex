\hypertarget{_a_d_s_r_8h_source}{}\doxysection{ADSR.\+h}
\label{_a_d_s_r_8h_source}\index{common/ADSR.h@{common/ADSR.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//}}
\DoxyCodeLine{2 \textcolor{comment}{// Created by ferluht on 08/07/2022.}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <cstdint>}}
\DoxyCodeLine{9 }
\DoxyCodeLine{13 \textcolor{keyword}{class }ADSR \{}
\DoxyCodeLine{14 }
\DoxyCodeLine{15     \textcolor{keyword}{enum} STAGES \{}
\DoxyCodeLine{16         stageA, stageD, stageS, stageR, stageEnd}
\DoxyCodeLine{17     \};}
\DoxyCodeLine{18 }
\DoxyCodeLine{19     \textcolor{keywordtype}{float} phase = 0;}
\DoxyCodeLine{20     uint8\_t stage = stageR;}
\DoxyCodeLine{21 }
\DoxyCodeLine{22     \textcolor{keywordtype}{float} switch\_level = 0;}
\DoxyCodeLine{23 }
\DoxyCodeLine{24     \textcolor{keywordtype}{bool} gate = \textcolor{keyword}{false};}
\DoxyCodeLine{25     \textcolor{keywordtype}{float} out = 0;}
\DoxyCodeLine{26     \textcolor{keywordtype}{float} prev\_a = 0.1;}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     \textcolor{keywordtype}{float} \mbox{\hyperlink{class_a}{A}}, D, S, R;}
\DoxyCodeLine{29 }
\DoxyCodeLine{30     \textcolor{keywordtype}{float} clockdiv;}
\DoxyCodeLine{31     \textcolor{keywordtype}{float} smpcount;}
\DoxyCodeLine{32     \textcolor{keywordtype}{float} out\_points[2];}
\DoxyCodeLine{33     \textcolor{keyword}{const} \textcolor{keywordtype}{float} phase\_inc = 0.001;}
\DoxyCodeLine{34 }
\DoxyCodeLine{35 \textcolor{keyword}{public}:}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     ADSR() : ADSR(10) \{\}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     ADSR(\textcolor{keywordtype}{float} clockdiv\_) \{}
\DoxyCodeLine{40         set(0.2, 1, 0.8, 30);}
\DoxyCodeLine{41         clockdiv = clockdiv\_;}
\DoxyCodeLine{42         reset();}
\DoxyCodeLine{43     \}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} reset() \{}
\DoxyCodeLine{46         stage = stageEnd;}
\DoxyCodeLine{47         smpcount = clockdiv;}
\DoxyCodeLine{48         phase = 0;}
\DoxyCodeLine{49         out\_points[0] = 0;}
\DoxyCodeLine{50         out\_points[1] = 0;}
\DoxyCodeLine{51     \}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} set(\textcolor{keywordtype}{float} A\_, \textcolor{keywordtype}{float} D\_, \textcolor{keywordtype}{float} S\_, \textcolor{keywordtype}{float} R\_) \{}
\DoxyCodeLine{54         \mbox{\hyperlink{class_a}{A}} = A\_ + 0.1;}
\DoxyCodeLine{55         D = D\_ + 0.1;}
\DoxyCodeLine{56         S = S\_ + 0.000001;}
\DoxyCodeLine{57         R = R\_ + 0.1;}
\DoxyCodeLine{58     \}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} gateOn() \{ gate = \textcolor{keyword}{true}; \}}
\DoxyCodeLine{61     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} gateOff() \{ gate = \textcolor{keyword}{false}; \}}
\DoxyCodeLine{62 }
\DoxyCodeLine{63     \textcolor{keyword}{inline} \textcolor{keywordtype}{float} get()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} out; \}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} end()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} stage == stageEnd; \}}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keyword}{inline} \textcolor{keywordtype}{float} calc\_env\_value();}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     \textcolor{keywordtype}{void} process();}
\DoxyCodeLine{70 \};}

\end{DoxyCode}
